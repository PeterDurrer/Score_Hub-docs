import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.dvv-DFtf.js";const E=JSON.parse('{"title":"Role Area Model - Documentation","description":"","frontmatter":{},"headers":[],"relativePath":"ROLE_AREA_MODEL.md","filePath":"ROLE_AREA_MODEL.md"}'),l={name:"ROLE_AREA_MODEL.md"};function n(h,s,r,p,o,k){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="role-area-model-documentation" tabindex="-1">Role Area Model - Documentation <a class="header-anchor" href="#role-area-model-documentation" aria-label="Permalink to &quot;Role Area Model - Documentation&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The Score_Hub application now implements a comprehensive role model with <strong>area-based assignments</strong>. This allows roles to be explicitly scoped to different contexts: global, club, and competition levels.</p><h2 id="role-areas" tabindex="-1">Role Areas <a class="header-anchor" href="#role-areas" aria-label="Permalink to &quot;Role Areas&quot;">​</a></h2><h3 id="_1-global-roles-area-global" tabindex="-1">1. Global Roles (<code>area = &#39;global&#39;</code>) <a class="header-anchor" href="#_1-global-roles-area-global" aria-label="Permalink to &quot;1. Global Roles (\`area = &#39;global&#39;\`)&quot;">​</a></h3><p>Global roles are assigned directly to users and apply system-wide.</p><p><strong>Available Roles:</strong></p><ul><li><strong>Administrator</strong>: Full access to all areas of the application</li><li><strong>Standard-Benutzer</strong>: Default role for all new users, provides basic access</li></ul><p><strong>Assignment:</strong></p><ul><li>Assigned via <code>userRoles</code> table</li><li>New users automatically receive &quot;Standard-Benutzer&quot; role (via database trigger)</li><li>Only global roles can be assigned in this context</li></ul><h3 id="_2-club-roles-area-club" tabindex="-1">2. Club Roles (<code>area = &#39;club&#39;</code>) <a class="header-anchor" href="#_2-club-roles-area-club" aria-label="Permalink to &quot;2. Club Roles (\`area = &#39;club&#39;\`)&quot;">​</a></h3><p>Club roles are assigned to users within specific clubs and govern club-level permissions.</p><p><strong>Available Roles:</strong></p><ul><li><strong>Verein-Admin</strong>: Full club administration rights, can edit club data and manage users</li><li><strong>Wettkampfadmin</strong>: Can create and manage competitions for the club, but only read club data</li><li><strong>Resultaterfasser</strong>: Can record results for club competitions</li></ul><p><strong>Assignment:</strong></p><ul><li>Assigned via <code>clubUsers</code> table</li><li>Requires both <code>clubID</code> and <code>userID</code></li><li>Only club roles can be assigned in this context</li></ul><h3 id="_3-competition-roles-area-competition" tabindex="-1">3. Competition Roles (<code>area = &#39;competition&#39;</code>) <a class="header-anchor" href="#_3-competition-roles-area-competition" aria-label="Permalink to &quot;3. Competition Roles (\`area = &#39;competition&#39;\`)&quot;">​</a></h3><p>Competition roles are assigned to users within specific competitions.</p><p><strong>Available Roles:</strong></p><ul><li><strong>Wettkampfadmin</strong>: Full editing rights for the competition</li><li><strong>Resultaterfasser</strong>: Can only record results for the competition</li><li><strong>Leser</strong>: Read-only access to competition data</li></ul><p><strong>Assignment:</strong></p><ul><li>Assigned via <code>competitionUsers</code> table</li><li>Requires both <code>competitionID</code> and <code>userID</code></li><li>Only competition roles can be assigned in this context</li><li>Competition creator automatically receives &quot;Wettkampfadmin&quot; role (via database trigger)</li></ul><h2 id="database-schema" tabindex="-1">Database Schema <a class="header-anchor" href="#database-schema" aria-label="Permalink to &quot;Database Schema&quot;">​</a></h2><h3 id="tables" tabindex="-1">Tables <a class="header-anchor" href="#tables" aria-label="Permalink to &quot;Tables&quot;">​</a></h3><h4 id="roles-table" tabindex="-1"><code>roles</code> Table <a class="header-anchor" href="#roles-table" aria-label="Permalink to &quot;\`roles\` Table&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[roles] (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [roleID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [name] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NVARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [area] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NVARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHECK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([area] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;club&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;competition&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [description] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NVARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- ... audit fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    CONSTRAINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UQ_roles_name_area </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([name], [area])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="userroles-table-global" tabindex="-1"><code>userRoles</code> Table (Global) <a class="header-anchor" href="#userroles-table-global" aria-label="Permalink to &quot;\`userRoles\` Table (Global)&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[userRoles] (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [userID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [roleID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- ... audit fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([userID], [roleID]),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([roleID]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[roles]([roleID])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="clubusers-table-club-level" tabindex="-1"><code>clubUsers</code> Table (Club-level) <a class="header-anchor" href="#clubusers-table-club-level" aria-label="Permalink to &quot;\`clubUsers\` Table (Club-level)&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[clubUsers] (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [clubID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NVARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [userID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [roleID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- ... audit fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([clubID], [userID]),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([roleID]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[roles]([roleID])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="competitionusers-table-competition-level" tabindex="-1"><code>competitionUsers</code> Table (Competition-level) <a class="header-anchor" href="#competitionusers-table-competition-level" aria-label="Permalink to &quot;\`competitionUsers\` Table (Competition-level)&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[competitionUsers] (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [competitionID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [userID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [roleID] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UNIQUEIDENTIFIER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- ... audit fields</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([competitionID], [userID]),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([roleID]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dbo].[roles]([roleID])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="database-triggers" tabindex="-1">Database Triggers <a class="header-anchor" href="#database-triggers" aria-label="Permalink to &quot;Database Triggers&quot;">​</a></h3><h4 id="_1-area-enforcement-triggers" tabindex="-1">1. Area Enforcement Triggers <a class="header-anchor" href="#_1-area-enforcement-triggers" aria-label="Permalink to &quot;1. Area Enforcement Triggers&quot;">​</a></h4><p>Three triggers enforce that roles can only be assigned in their appropriate context:</p><ul><li><code>trg_userRoles_area_check</code>: Only allows <code>area=&#39;global&#39;</code> roles</li><li><code>trg_clubUsers_area_check</code>: Only allows <code>area=&#39;club&#39;</code> roles</li><li><code>trg_competitionUsers_area_check</code>: Only allows <code>area=&#39;competition&#39;</code> roles</li></ul><h4 id="_2-auto-assignment-triggers" tabindex="-1">2. Auto-Assignment Triggers <a class="header-anchor" href="#_2-auto-assignment-triggers" aria-label="Permalink to &quot;2. Auto-Assignment Triggers&quot;">​</a></h4><p>Two triggers automatically assign roles:</p><ul><li><code>trg_users_auto_assign_standard_role</code>: Assigns &quot;Standard-Benutzer&quot; to new users</li><li><code>trg_competitions_assign_creator_admin</code>: Assigns creator as &quot;Wettkampfadmin&quot; for new competitions</li></ul><h2 id="api-endpoints" tabindex="-1">API Endpoints <a class="header-anchor" href="#api-endpoints" aria-label="Permalink to &quot;API Endpoints&quot;">​</a></h2><h3 id="roles-management" tabindex="-1">Roles Management <a class="header-anchor" href="#roles-management" aria-label="Permalink to &quot;Roles Management&quot;">​</a></h3><h4 id="get-roles-filtered-by-area" tabindex="-1">Get Roles (Filtered by Area) <a class="header-anchor" href="#get-roles-filtered-by-area" aria-label="Permalink to &quot;Get Roles (Filtered by Area)&quot;">​</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/roles?area={global|club|competition}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer {token}</span></span></code></pre></div><p><strong>Response:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;roleID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Administrator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;area&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;global&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Vollzugriff auf alle Bereiche&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;pagination&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="user-role-assignments-global" tabindex="-1">User Role Assignments (Global) <a class="header-anchor" href="#user-role-assignments-global" aria-label="Permalink to &quot;User Role Assignments (Global)&quot;">​</a></h3><h4 id="assign-global-role-to-user" tabindex="-1">Assign Global Role to User <a class="header-anchor" href="#assign-global-role-to-user" aria-label="Permalink to &quot;Assign Global Role to User&quot;">​</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/user-roles</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer {token}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;userID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;roleID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Must be a global role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="club-user-assignments" tabindex="-1">Club User Assignments <a class="header-anchor" href="#club-user-assignments" aria-label="Permalink to &quot;Club User Assignments&quot;">​</a></h3><h4 id="assign-club-role-to-user" tabindex="-1">Assign Club Role to User <a class="header-anchor" href="#assign-club-role-to-user" aria-label="Permalink to &quot;Assign Club Role to User&quot;">​</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/club-users</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer {token}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clubID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;club-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;userID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;roleID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Must be a club role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="competition-user-assignments" tabindex="-1">Competition User Assignments <a class="header-anchor" href="#competition-user-assignments" aria-label="Permalink to &quot;Competition User Assignments&quot;">​</a></h3><h4 id="assign-competition-role-to-user" tabindex="-1">Assign Competition Role to User <a class="header-anchor" href="#assign-competition-role-to-user" aria-label="Permalink to &quot;Assign Competition Role to User&quot;">​</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/competitions/{competitionID}/users</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer {token}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;userID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;roleID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Must be a competition role</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="frontend-integration" tabindex="-1">Frontend Integration <a class="header-anchor" href="#frontend-integration" aria-label="Permalink to &quot;Frontend Integration&quot;">​</a></h2><h3 id="constants" tabindex="-1">Constants <a class="header-anchor" href="#constants" aria-label="Permalink to &quot;Constants&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// frontend/src/constants/roleArea.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RoleArea</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Global</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Club</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;club&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Competition</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;competition&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RoleAreaLabels</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RoleArea</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [RoleArea.Global]: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Global&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [RoleArea.Club]: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Verein&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [RoleArea.Competition]: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Wettkampf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="types" tabindex="-1">Types <a class="header-anchor" href="#types" aria-label="Permalink to &quot;Types&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// frontend/src/api/types/roles.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RoleArea</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;global&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;club&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;competition&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Role</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  roleID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  area</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RoleArea</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  createdAt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="api-usage" tabindex="-1">API Usage <a class="header-anchor" href="#api-usage" aria-label="Permalink to &quot;API Usage&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get all global roles</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> globalRoles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rolesApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, RoleArea.Global);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get all club roles</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> clubRoles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rolesApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, RoleArea.Club);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get all competition roles</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> competitionRoles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rolesApi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, RoleArea.Competition);</span></span></code></pre></div><h2 id="permission-matrix" tabindex="-1">Permission Matrix <a class="header-anchor" href="#permission-matrix" aria-label="Permalink to &quot;Permission Matrix&quot;">​</a></h2><h3 id="global-level" tabindex="-1">Global Level <a class="header-anchor" href="#global-level" aria-label="Permalink to &quot;Global Level&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Role</th><th>Access</th></tr></thead><tbody><tr><td>Administrator</td><td>Full system access, can manage all data</td></tr><tr><td>Standard-Benutzer</td><td>Basic read access to competitions</td></tr></tbody></table><h3 id="club-level" tabindex="-1">Club Level <a class="header-anchor" href="#club-level" aria-label="Permalink to &quot;Club Level&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Role</th><th>Club Data</th><th>Competition Creation</th><th>Result Entry</th></tr></thead><tbody><tr><td>Verein-Admin</td><td>Read &amp; Edit</td><td>✓</td><td>✓</td></tr><tr><td>Wettkampfadmin</td><td>Read Only</td><td>✓</td><td>✓</td></tr><tr><td>Resultaterfasser</td><td>Read Only</td><td>✗</td><td>✓</td></tr></tbody></table><h3 id="competition-level" tabindex="-1">Competition Level <a class="header-anchor" href="#competition-level" aria-label="Permalink to &quot;Competition Level&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Role</th><th>Competition Edit</th><th>Result Entry</th><th>Read Access</th></tr></thead><tbody><tr><td>Wettkampfadmin</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Resultaterfasser</td><td>✗</td><td>✓</td><td>✓</td></tr><tr><td>Leser</td><td>✗</td><td>✗</td><td>✓</td></tr></tbody></table><h2 id="menu-visibility" tabindex="-1">Menu Visibility <a class="header-anchor" href="#menu-visibility" aria-label="Permalink to &quot;Menu Visibility&quot;">​</a></h2><h3 id="admin-menu" tabindex="-1">Admin Menu <a class="header-anchor" href="#admin-menu" aria-label="Permalink to &quot;Admin Menu&quot;">​</a></h3><ul><li>Only visible to users with &quot;Administrator&quot; (global) role</li></ul><h3 id="wettkampfe-menu" tabindex="-1">Wettkämpfe Menu <a class="header-anchor" href="#wettkampfe-menu" aria-label="Permalink to &quot;Wettkämpfe Menu&quot;">​</a></h3><ul><li>Visible to all authenticated users (all have &quot;Standard-Benutzer&quot;)</li></ul><h3 id="club-management" tabindex="-1">Club Management <a class="header-anchor" href="#club-management" aria-label="Permalink to &quot;Club Management&quot;">​</a></h3><ul><li>Visible to users with any club role</li><li>Edit functionality only for &quot;Verein-Admin&quot;</li><li>Read-only for &quot;Wettkampfadmin&quot; and &quot;Resultaterfasser&quot;</li></ul><h3 id="competition-management" tabindex="-1">Competition Management <a class="header-anchor" href="#competition-management" aria-label="Permalink to &quot;Competition Management&quot;">​</a></h3><ul><li>Visible to users with competition-specific roles</li><li>Full edit for &quot;Wettkampfadmin&quot;</li><li>Result entry only for &quot;Resultaterfasser&quot;</li><li>Read-only for &quot;Leser&quot;</li></ul><h2 id="migration-path" tabindex="-1">Migration Path <a class="header-anchor" href="#migration-path" aria-label="Permalink to &quot;Migration Path&quot;">​</a></h2><h3 id="from-old-schema-to-new-schema" tabindex="-1">From Old Schema to New Schema <a class="header-anchor" href="#from-old-schema-to-new-schema" aria-label="Permalink to &quot;From Old Schema to New Schema&quot;">​</a></h3><ol><li>Run <code>add-role-area.sql</code> migration to add area column</li><li>Run <code>seed-area-specific-roles.sql</code> to ensure all roles exist</li><li>Run <code>create-area-enforcement-triggers.sql</code> to enforce area constraints</li><li>Run <code>create-user-auto-role-trigger.sql</code> for automatic user role assignment</li><li>Run <code>update-competitionUsers-roleID.sql</code> to migrate from role string to roleID</li><li>Run <code>create-competition-creator-trigger.sql</code> for automatic creator assignment</li></ol><h3 id="backward-compatibility" tabindex="-1">Backward Compatibility <a class="header-anchor" href="#backward-compatibility" aria-label="Permalink to &quot;Backward Compatibility&quot;">​</a></h3><p>The system maintains backward compatibility through:</p><ul><li>Legacy role names in <code>UserRole</code> enum (e.g., <code>ADMIN</code>, <code>WETTKAMPF_ADMIN</code>)</li><li>Both old and new role names checked in authorization functions</li><li>Gradual migration of frontend components to use new role names</li></ul><h2 id="testing-considerations" tabindex="-1">Testing Considerations <a class="header-anchor" href="#testing-considerations" aria-label="Permalink to &quot;Testing Considerations&quot;">​</a></h2><h3 id="database-trigger-tests" tabindex="-1">Database Trigger Tests <a class="header-anchor" href="#database-trigger-tests" aria-label="Permalink to &quot;Database Trigger Tests&quot;">​</a></h3><ol><li>Attempt to assign a club role to userRoles → Should fail</li><li>Attempt to assign a global role to clubUsers → Should fail</li><li>Create a new user → Should automatically have &quot;Standard-Benutzer&quot;</li><li>Create a competition → Creator should automatically be &quot;Wettkampfadmin&quot;</li></ol><h3 id="api-validation-tests" tabindex="-1">API Validation Tests <a class="header-anchor" href="#api-validation-tests" aria-label="Permalink to &quot;API Validation Tests&quot;">​</a></h3><ol><li>POST to <code>/api/user-roles</code> with club role → Should return error</li><li>POST to <code>/api/club-users</code> with global role → Should return error</li><li>POST to <code>/api/competitions/{id}/users</code> with non-competition role → Should return error</li><li>GET <code>/api/roles?area=global</code> → Should only return global roles</li></ol><h3 id="frontend-tests" tabindex="-1">Frontend Tests <a class="header-anchor" href="#frontend-tests" aria-label="Permalink to &quot;Frontend Tests&quot;">​</a></h3><ol><li>Role selection dropdowns should filter by appropriate area</li><li>Menu items should be visible/hidden based on user&#39;s roles</li><li>Edit buttons should be disabled for read-only roles</li></ol><h2 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">​</a></h2><ol><li><strong>Area Validation</strong>: All role assignments are validated both in API layer and database triggers</li><li><strong>Automatic Assignments</strong>: Critical roles (Standard-Benutzer, Wettkampfadmin for creator) are assigned automatically</li><li><strong>Permission Checks</strong>: All sensitive operations check for appropriate role and area</li><li><strong>Administrator Access</strong>: Global Administrator role bypasses most restrictions for system management</li></ol><h2 id="future-enhancements" tabindex="-1">Future Enhancements <a class="header-anchor" href="#future-enhancements" aria-label="Permalink to &quot;Future Enhancements&quot;">​</a></h2><ul><li>[ ] Add ability to assign multiple roles per user per context</li><li>[ ] Implement role hierarchy for permission inheritance</li><li>[ ] Add custom role creation with granular permissions</li><li>[ ] Implement time-based role assignments (temporary roles)</li><li>[ ] Add audit log for role assignments and changes</li></ul>`,94)])])}const c=i(l,[["render",n]]);export{E as __pageData,c as default};
